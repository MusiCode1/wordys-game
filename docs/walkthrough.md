# Walkthrough - Refactor Asset Handling

ביצעתי שינוי מקיף (Refactor) באופן שבו המערכת מנהלת נכסים (תמונות וסאונד) ומשייכת אותם למילים.

## שינויים שבוצעו

### 1. ניהול נכסים דינמי

- נוצר קובץ `available-assets.json` המכיל רשימה של כל הקבצים הקיימים במערכת.
- עודכן `src/lib/services/assets.ts` לטעון קובץ זה ולבדוק קיום קבצים בזמן אמת.
- נוספו פונקציות עזר:
  - `getCardImageUrl(cardId)`: מחזירה את כתובת התמונה לפי ה-ID של הכרטיס (או placeholder אם לא קיים).
  - `getCardAudioUrl(cardId)`: מחזירה את כתובת הסאונד (wav/mp3) אם קיימת.

### 2. ניקוי נתונים (`data clean-up`)

- **`src/lib/types.ts`**: הוסרו השדות `imageUrl` ו-`audioUrl` מהממשק `Card`. כעת הכרטיס מכיל רק `id` ו-`word`.
- **`src/lib/data/words.ts`**: הוסרו כל ההגדרות הישירות של `imageUrl: getAssetUrl(...)`. הקובץ כעת נקי ורזה יותר.

### 3. עדכון רכיבים ושירותים

- **`image-helpers.ts` & `sound.ts`**: עודכנו להשתמש בפונקציות החדשות מ-`assets.ts`.
- **`sound.ts`**: נוספה יכולת לנגן קבצי אודיו (`playAudio`), עם Fallback ל-TTS אם אין קובץ הקלטה זמין.
- **רכיבי UI (`GameContainer`, `Select`, `Admin`)**: עודכנו להשתמש ב-`getCardImageUrl(card.id)` במקום לגשת לשדה שאינו קיים עוד.
- **`shelvesStore.svelte.ts`**: עודכן להתאים לשינויי הטיפוסים (הוסרה תמיכה בהגדרת URL ידנית לכרטיס, המערכת מסתמכת על ID).

## אימות

- הורצה בדיקת `npm run check` שהסתיימה ללא שגיאות (0 errors).
- המערכת כעת יציבה ומסתמכת על קונבנציית שמות (Convention over Configuration) - קובץ התמונה והסאונד חייבים להיות בעלי אותו שם כמו ה-ID של הכרטיס.

## הוראות למשתמש

- אם ברצונך להוסיף כרטיס חדש דרך ה-Admin, יש לוודא שקובץ התמונה והסאונד המתאימים נמצאים בתיקייה המתאימה בשרת/R2 עם השם התואם ל-ID שנוצר (או ID ידני אם יתאפשר בעתיד).
